<!-- GLOUD.xml，全新版本的HookSetting，除非添加新游戏，否则请勿随意修改 -->
<!-- 特殊字符（xml规范，右边符号一律以左符号代替）： [&lt;][<] [&gt;][>] [&amp;][&] [&apos;][['] [&quot;]["] -->
<?xml version="1.0" encoding="utf-8"?>
<set>
  <!-- GLOUD_InGameAgent版本号设置，研发人员调试请使用debug（小写） -->
  <version value="dwm" />
  <!-- 开发调试模式，默认关闭，非开发人员勿动 -->
  <debug value="0" />
  <!-- 本地设置，每个游戏均需要针对配置 -->
  <local>
    <render_weight value="29" />
    <!-- 游戏名称：XXX -->
    <!-- 启动程序文件名，需要带后缀名 -->
    <exe_name value="SSFIV.exe" />
    <!-- 是否64位进程，如果是则需要加载InGameAgent64.dll -->
    <x64 value="0" />
    <!-- 启动exe参数，部分游戏可以直接指定窗口化运行模式等 -->
    <exe_args value="" />
    <!-- 启动程序时的程序路径 -->
    <path value="." />
    <!-- 启动程序时显示窗口, DWM模式下自动为1 -->
    <runwithwindow value="0"/>
    <!-- 脚本配置，暂时没有利用起来。将来可以用作在游戏启动前做一些操作。 -->
    <scripts>
      <before_run value="0">"gloud_init.bat"</before_run>
      <after_run value="0">""</after_run>
    </scripts>
    <!-- DWM模式下该游戏的每个需要注入InGameAgent抓图的进程。all=1表示自动在所有子进程中注入InGameAgent。 -->
    <!-- priority是指如果多个进程同时有可见窗口，那么应该用哪个进程的画面，当然是优先级最高的。暂时没用。 -->
    <!-- window_name是目标窗口的标题。window_class_name是目标窗口的类名。 auto_detect_window表示是否自动发现窗口，机制是从当前进程的可见窗口中挑出一个最大的。window_name和window_class_name的优先级高于auto_detect_window。 -->
    <!-- show_fps表示是否在画面上显示当前FPS。target_fps是适合该游戏的FPS，优先级高于用户要求的FPS，一般Launcher等低帧速应用大概15fps即可，一般游戏20~30fps，fps、竞技等最好到40fps。 -->
    <!-- frame_skip表示是否启动跳帧模式，对于能跑到60fps的游戏，设为1；对于只能跑到30fps左右的游戏，比如极品飞车系列，设为0；-->
    <!-- dwm==1表示DWM模式，!=1表示关闭DWM模式，相当于使用DEBUG版的IGA。 -->
    <dwm all="0">
      <proc name="SSFIV.exe" target_fps="40" dwm="0" show_fps="0" />
    </dwm>
  </local>
  <!-- 模块功能设定，用模块化方式划分功能设置 -->
  <moudle>
    <ddraw value="0" />
    <d3d8 value="0" />
    <d3d9 value="1" />
    <d3d9ex value="0" />
    <dxgi value="0">
      <!-- 是否开启d3d11支持，注意开启后不能支持d3d10 -->
      <ifd3d11 value="0"/>
    </dxgi>
    <!-- 大型游戏需要DXInput才能支持ESC等按键。 -->
    <dinput8 value="0">
      <key_state value="1" />
      <key_data value="1" />
      <mouse_state value="0" />
      <mouse_data value="0" />
      <gamepad_state value="0" />
      <gamepad_data value="0" />
      <!-- 禁用游戏手柄，处理部分游戏识别虚拟手柄异常问题 -->
      <disable_gamepad value="0" />
    </dinput8>
    <gdi32 value="0" />
    <kernel32 value="1">
      <!-- 创建进程 -->
      <create_process value="1" />
    </kernel32>
    <kernelbase>
      <!--禁用TerminateThread，防止英雄联盟把IGA的线程杀掉。 -->
      <crack_TerminateThread value="1" />
    </kernelbase>
    <!-- 声音Hook -->
    <ole32 value="1">
        <!-- 该选项配合directinput使用，用来在游戏检测xbox手柄时进行欺骗。游戏检测xbox手柄主要是检测vid pid -->
        <wmi value="0" />
        <audio_client enable="false" />
    </ole32>
    <opengl32 value="0" />
    <!-- 英雄联盟有到127.0.0.1的连接，需要Hook一下解决多开问题，对其他游戏无影响。 -->
    <ws2_32 value="1" />
    <shell32 value="1" >
      <!-- 创建进程 -->
      <create_process value="1" />
    </shell32>
    <xinput value="1"/>
    <user32 value="1">
      <!-- 创建窗口控制 -->
      <forms>
        <!-- 隐藏所有窗口, DWM模式自动为0 -->
        <hide_all value="1" />
        <!-- 将进程放到一个独立的桌面上去，达到隐藏窗口的目的，不过部分游戏不支持。DWM模式自动为0 -->
        <private_desktop value="0" />
        <!-- 设置窗口风格,隐藏窗口 -->
        <set_style value="0" />
      </forms>
      <!-- 处理Ruse类游戏，GetCursorPos未转换坐标问题（临时） -->
      <cur_pos_reset value="0" />
      <input>
        <post_key value="1" />
        <post_mouse value="0" />
        <push_key value="1" />
        <!-- push_mouse会修改m_cursor_pos，和DWM模式冲突 -->
        <push_mouse value="0" />
        <!-- 中文输入 -->
        <post_char value="1" />
        <!-- 原数据处理 -->
        <raw_key value="0" />
        <raw_mouse value="0" />
      </input>
      <!-- 关于鼠标左键双击处理(鼠标右键双击暂未处理）默认禁止==0;开启==1 -->
      <disable_mouse_dbclick value="0" />
      <!-- 针对大航海-纪元1701BUG处理，DWM模式都禁止Hook GetTopWindow -->
      <disable_GetTopWindow value="1" />
      <!-- 针对3.53以后版本的客户端，不再发送VK_SHIFT键值。1 == 模拟VK_SHIFT -->
      <enable_Simulation_SHIFT value="0" />
      <!-- GetKeyState 获取键盘按键有四个状态,分别:0x0000,0xff81,0x0001,0xff80;针对雷曼。默认为0 -->
      <enable_KeyState value="0" />
      <hooks>
        <!-- 开启hook的api -->
        <raw_input value="0" />
      </hooks>
      <wnd_proc_chain value="0" />
    </user32>
  </moudle>
  <!-- 通用设置 -->
  <common>
    <!-- 光标处理相关 -->
    <cursor>
      <!-- 开启动态光标格式传输 -->
      <enable_dynamics_cur value="0" />
      <!-- 仅处理光标显示隐藏 -->
      <show_hide_only value="0" />
      <!-- 总是隐藏，双光标 -->
      <always_hide value="1" />
      <!-- 总是显示，特殊游戏处理，不要与always_hide冲突，否则失效 -->
      <always_show value="0" />
      <!-- 将游戏光标合成到游戏图像中 -->
      <bind_cursor value="0" />
      <!-- 边界值转换，必须为正数，处理帝国三边界移动(20) -->
      <frame_pos_change value="0" />
      <!-- 启用光标坐标回传 -->
      <enable_pos_send_back value="0" />
      <!-- 回传偏移，针对英雄萨姆回传坐标范围过小 -->
      <pos_send_back_offset value="0" />
      <!-- 偏移延迟，开启回传偏移后有效，单位秒 -->
      <pos_send_back_offset_timeoff value="0" />
      <!-- 是否是系统光标，某些游戏用的是系统光标。1 == 是系统光标。默认为0 -->
      <is_system_cursor value="1" />
    </cursor>
    <!-- 游戏物理鼠标速度设置 -->
    <phy_mouse_speed value="0">100</phy_mouse_speed>
    <!-- 视频设置 -->
    <video>
      <!-- IGA直接送编码后视频 2013.08.06 by Sky -->
      <out_enc_video enable="true" />
      <!-- IGA是否做等比缩放，true等比并填充黑色，false拉伸到全幅 2013.12.26 by lyf -->
      <out_enc_auto_fit enable="false" />
      <!-- 根据客户端，重设分辨率-->
      <reset_display value="0" />
      <!-- 强制分辨率设置，只有value为1时方有效 -->
      <width value="0">1280</width>
      <height value="0">720</height>
      <!-- 确认游戏首次窗口设备正确（特殊，针对幕府游戏） -->
      <be_sure_first_hwnd_ok value="0" />
      <!-- 为DX9使用的额外调试用参数 -->
      <present_for_program value = "0" />
    </video>
    <!-- 针对特殊游戏处理，同一时刻只能存在一个为1 -->
    <games>
      <!-- 游戏帧率控制，通过绘制时等待，限制游戏帧率 -->
      <game_fps_lock value="60" />
      <!-- 如果不能及时处理，就丢弃other消息 -->
      <drop_other value="true" />
      <!-- 魔兽世界，50为回传间隔时间ms，如果不灵敏，可微调 -->
      <wow_mouse_do value="0">50</wow_mouse_do>
      <!-- 控制输入法的，不知道有什么用 -->
      <process_ime_composition value="0" />
      <!-- 坦克世界特殊处理 -->
      <WorldOfTanks_do value="0" />
      <!-- 梦幻海底（flash） -->
      <DreamOcean_do value="0" />
    </games>
  </common>
</set>
